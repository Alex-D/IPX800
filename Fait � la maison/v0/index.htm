~inc:header.inc~
<div id="content">
	<div id="status">
		<!-- Message d'erreur masqué par défaut, affiché en cas de perte de connexion -->
		<div id="loading" style="display:none">
			Erreur :<br />
			La connexion à la carte a été perdue
		</div>
	
	
		<div id="display">
			<div class="bloc">
				<h5>Etat et contrôle des relais</h5>
				<p class="leds" style="margin-left:10px;">
					<a id="led0" onclick="newAJAXCommand('leds.cgi?led=0');">&bull;</a>
					<a id="led1" onclick="newAJAXCommand('leds.cgi?led=1');">&bull;</a>
					<a id="led2" onclick="newAJAXCommand('leds.cgi?led=2');">&bull;</a>
					<a id="led3" onclick="newAJAXCommand('leds.cgi?led=3');">&bull;</a>
					<a id="led4" onclick="newAJAXCommand('leds.cgi?led=4');">&bull;</a>
					<a id="led5" onclick="newAJAXCommand('leds.cgi?led=5');">&bull;</a>
					<a id="led6" onclick="newAJAXCommand('leds.cgi?led=6');">&bull;</a>
					<a id="led7" onclick="newAJAXCommand('leds.cgi?led=7');">&bull;</a>
				</p>
				<span style="height: 10px; with: 0px;font-size:11px;font-weight:bold;margin-left:15px; letter-spacing:1.545em ">12345678</span>
			</div>
			
			<div class="bloc">
				<h5>Mode Fugitif</h5>
				<br/>
				<INPUT type="button" value="Ch 1" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=0');" style="margin-left:15px;">
				<INPUT type="button" value="Ch 2" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=1');" style="margin-left:5px;">
				<INPUT type="button" value="Ch 3" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=2');" style="margin-left:5px;">
				<INPUT type="button" value="Ch 4" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=3');" style="margin-left:5px;">
				<INPUT type="button" value="Ch 5" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=4');" style="margin-left:5px;">
				<INPUT type="button" value="Ch 6" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=5');" style="margin-left:5px;">
				<INPUT type="button" value="Ch 7" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=6');" style="margin-left:5px;">
				<INPUT type="button" value="Ch 8" style="width:40px" onclick="newAJAXCommand('rlyfs.cgi?rlyf=7');" style="margin-left:5px;">
			</div>
	
			<div class="bloc">
				<h5>Etat des entrées logiques</h5>
				<p>
					<span id="btn3" class="marges">?</span> &nbsp; 
					<span id="btn2" class="marges">?</span> &nbsp; 
					<span id="btn1" class="marges">?</span> &nbsp; 
					<span id="btn0" class="marges">?</span>
					<br/>
					<span style="height: 10px;font-size:11px;font-weight:bold;margin-left: 19px; letter-spacing: 3.85em;">1234</span>
				</p>
				<p style="height: 10px; font-size:9px;font-weight:normal;margin:-7px 0 0 23px;">Statut TOR (Tout Ou Rien) : 0 ou 1</p>
			</div>
	
			
			<div class="bloc">
				<h5>Etat des entrées analogiques</h5>
				<p style="margin-left: 15px;">Entrée 1 : <span id="an1" style="font-weight:normal">?</span></p>
				<p style="margin-left: 15px;">Entrée 2 : <span id="an2" style="font-weight:normal">?</span></p>
			</div>
	
			<p align="center">Heure Internet (Temps universel Coordonné) : <span id="time0" style="font-weight:normal">?</span></p>
		</div>
	</div>
</div>



<script type="text/javascript">
	<!--
	// Récupère la réponse au format XML dans le fichier status.xml puis met à jour les différents éléments de la page
	function updateStatus(xmlData) {
		// Vérifie si le délais d'attente est dépassé
		if(!xmlData) {
			// Si le délais est dépassé
			document.getElementById('display').style.display = 'none';		// On masque le contenu de la page (div ayant l'id 'display')
			document.getElementById('loading').style.display = 'inline';	// On affiche le message d'erreur (div ayant l'id 'loading')
			return;
		}
	
	
		// On s'assure que le message d'erreur est masqué et qu'on affiche le contenu de la page
		document.getElementById('loading').style.display = 'none';
		document.getElementById('display').style.display = 'inline';
	
	
		// On boucle sur l'état des relais, on met en vert si le relais NO est fermé, sinon gris
		for(i = 0; i < 8; i++) {
			if(getXMLValue(xmlData, 'led'+i) == '1')
				document.getElementById('led' + i).style.color = '#090';
			else
				document.getElementById('led' + i).style.color = '#ddd';
		}
	
	
		// On boucle sur les entrées logiques TOR et on affiche le résultat selon l'état de l'entrée
		for(i = 0; i < 4; i++) {
			if(getXMLValue(xmlData, 'btn'+i) == 'up')
				document.getElementById('btn' + i).innerHTML = '0';
			else
				document.getElementById('btn' + i).innerHTML = '1';
		}
	
	
		// Mise à jour des valeurs des entrées analogiques
		document.getElementById('an1').innerHTML = getXMLValue(xmlData, 'an1');
		document.getElementById('an2').innerHTML = getXMLValue(xmlData, 'an2');
	
	
		// Mise à jour de l'heure internet, heure GTM 0 (heure de Londres)
		document.getElementById('time0').innerHTML = getXMLValue(xmlData, 'time0');
	}
	
	// Actualise la page toutes les 500ms en appelant la fonction ci-dessus
	setTimeout("newAJAXCommand('status.xml', updateStatus, true)", 500);
	//-->
</script>


~inc:footer.inc~